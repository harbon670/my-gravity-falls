<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gravity Falls: Mystery Shack Hunt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    body { background: #1a0f00; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; color: #fff; font-family: 'Courier New', Courier, monospace; overflow: hidden; touch-action: none; }
    #ui { text-align: center; margin-bottom: 10px; background: rgba(241, 196, 15, 0.1); padding: 15px; border-radius: 15px; border: 2px solid #f1c40f; width: 280px; }
    #score { font-size: 24px; color: #f1c40f; margin: 0; font-weight: bold; }
    #lives { color: #ff4757; font-size: 18px; margin-top: 5px; }
    canvas { border: 4px solid #4a2e00; background: url('https://w.forfun.com') center/cover; max-height: 70vh; cursor: crosshair; }
  </style>
</head>
<body>

  <div id="ui">
    <div id="score">–ê–†–¢–ï–§–ê–ö–¢–´: 0</div>
    <div id="lives">–ñ–ò–ó–ù–ò: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
  </div>
  <canvas width="320" height="480" id="game"></canvas>

  <script>
    const canvas = document.getElementById('game');
    const context = canvas.getContext('2d');
    
    let score = 0;
    let lives = 3;
    let gameOver = false;
    let objects = [];
    let spawnTimer = 0;

    // –¢–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤: emoji –∑–∞–º–µ–Ω—è—é—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    const items = [
      { name: '–î–Ω–µ–≤–Ω–∏–∫', type: 'anomaly', icon: 'üìñ', size: 40 },
      { name: '–ë–∏–ª–ª', type: 'anomaly', icon: 'üëÅÔ∏è', size: 45 },
      { name: '–ö—Ä–∏—Å—Ç–∞–ª–ª', type: 'anomaly', icon: 'üíé', size: 35 },
      { name: '–ö–µ–ø–∫–∞', type: 'normal', icon: 'üß¢', size: 40 },
      { name: '–ö—Ä—É–∂–∫–∞', type: 'normal', icon: '‚òï', size: 35 },
      { name: '–ü–æ–Ω—á–∏–∫', type: 'normal', icon: 'üç©', size: 35 }
    ];

    function spawn() {
      const item = items[Math.floor(Math.random() * items.length)];
      objects.push({
        ...item,
        x: Math.random() * (canvas.width - 50) + 25,
        y: canvas.height + 50,
        speed: 2 + Math.random() * 3 + (score / 100), // –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
        angle: Math.random() * Math.PI * 2,
        rotSpeed: (Math.random() - 0.5) * 0.1
      });
    }

    canvas.addEventListener('pointerdown', (e) => {
      if (gameOver) return location.reload();
      
      const rect = canvas.getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;

      for (let i = objects.length - 1; i >= 0; i--) {
        let obj = objects[i];
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –∫–ª–∏–∫–∞
        let dist = Math.hypot(mx - obj.x, my - (obj.y - 20));
        if (dist < 30) {
          if (obj.type === 'anomaly') {
            score += 10;
            document.getElementById('score').innerText = "–ê–†–¢–ï–§–ê–ö–¢–´: " + score;
          } else {
            takeDamage();
          }
          objects.splice(i, 1);
          return;
        }
      }
    });

    function takeDamage() {
      lives--;
      updateLives();
      if (lives <= 0) gameOver = true;
    }

    function updateLives() {
      document.getElementById('lives').innerText = "–ñ–ò–ó–ù–ò: " + "‚ù§Ô∏è".repeat(Math.max(0, lives));
    }

    function loop() {
      if (gameOver) {
        context.fillStyle = 'rgba(0,0,0,0.8)';
        context.fillRect(0, 0, canvas.width, canvas.height);
        context.fillStyle = '#f1c40f';
        context.font = '24px Courier New';
        context.textAlign = 'center';
        context.fillText("–ö–†–ê–• –•–ò–ñ–ò–ù–´!", 160, 220);
        context.fillStyle = '#fff';
        context.font = '16px Courier New';
        context.fillText("–¢–´ –°–û–ë–†–ê–õ–ê " + score + " –û–ß–ö–û–í", 160, 260);
        context.fillText("–ñ–ú–ò, –ß–¢–û–ë–´ –ü–ï–†–ï–ò–ì–†–ê–¢–¨", 160, 320);
        return;
      }

      requestAnimationFrame(loop);
      context.clearRect(0, 0, canvas.width, canvas.height);

      // –¢–∞–π–º–µ—Ä –ø–æ—è–≤–ª–µ–Ω–∏—è
      spawnTimer++;
      if (spawnTimer > 60 - Math.min(40, score/5)) {
        spawn();
        spawnTimer = 0;
      }

      // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ
      for (let i = objects.length - 1; i >= 0; i--) {
        let obj = objects[i];
        obj.y -= obj.speed;
        obj.angle += obj.rotSpeed;

        context.save();
        context.translate(obj.x, obj.y);
        context.rotate(obj.angle);
        context.font = obj.size + 'px serif';
        context.textAlign = 'center';
        context.textBaseline = 'middle';
        context.fillText(obj.icon, 0, 0);
        context.restore();

        // –£–ª–µ—Ç–µ–ª –∑–∞ —ç–∫—Ä–∞–Ω
        if (obj.y < -50) {
          if (obj.type === 'anomaly') takeDamage(); // –ü—Ä–æ–ø—É—Å—Ç–∏–ª –≤–∞–∂–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
          objects.splice(i, 1);
        }
      }
    }

    updateLives();
    loop();
  </script>
</body>
</html>
