<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gravity Falls: –•–∏–∂–∏–Ω–∞ –ß—É–¥–µ—Å</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    /* –°—Ç–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
    }
    
    body {
      background: #2a5a3a;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: 'Comic Sans MS', 'Chalkboard SE', 'Courier New', monospace;
      touch-action: none;
      padding: 5px;
    }
    
    #game-container {
      max-width: 340px;
      width: 100%;
      background: #f9e9c9;
      padding: 10px 8px 15px;
      border-radius: 30px 30px 15px 15px;
      border: 5px solid #b58b4a;
      box-shadow: 0 8px 0 #8b691f;
    }
    
    #header {
      background: #ffd966;
      border-radius: 20px 20px 10px 10px;
      padding: 6px 8px;
      margin-bottom: 8px;
      border-bottom: 4px solid #b58b4a;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    h1 {
      font-size: 16px;
      color: #2a5a2a;
      text-shadow: 2px 2px 0 #e9b13b;
      white-space: nowrap;
    }
    
    #stats {
      background: #2a5a2a;
      border-radius: 30px;
      padding: 5px 12px;
      display: flex;
      gap: 15px;
      border: 2px solid #e9b13b;
    }
    
    .stat-box {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 14px;
      color: #ffd966;
    }
    
    canvas {
      display: block;
      width: 100%;
      aspect-ratio: 300/330;
      border-radius: 20px;
      border: 4px solid #b58b4a;
      cursor: pointer;
      background: #87CEEB;
      box-shadow: 0 5px 0 #8b691f;
      margin-bottom: 8px;
    }
    
    #control-panel {
      display: flex;
      gap: 6px;
      margin-bottom: 8px;
    }
    
    .btn {
      flex: 1;
      background: #ffd966;
      border: none;
      border-bottom: 4px solid #b58b4a;
      border-radius: 40px;
      padding: 10px 0;
      font-size: 14px;
      font-weight: bold;
      color: #2a5a2a;
      font-family: inherit;
      cursor: pointer;
      text-align: center;
    }
    
    .btn:active {
      transform: translateY(2px);
      border-bottom-width: 2px;
    }
    
    .btn.pause {
      background: #ffb366;
    }
    
    #guide {
      background: #2a5a2a;
      border-radius: 20px;
      padding: 6px 5px;
      border: 3px solid #ffd966;
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .guide-item {
      display: flex;
      align-items: center;
      gap: 3px;
      background: #ffd966;
      padding: 3px 8px;
      border-radius: 30px;
      border-bottom: 3px solid #b58b4a;
      font-size: 11px;
      font-weight: bold;
      color: #1a3f1a;
    }
    
    .guide-bad {
      background: #ffb366;
    }
    
    .guide-img {
      width: 22px;
      height: 22px;
      object-fit: contain;
    }
    
    #message {
      text-align: center;
      margin-top: 6px;
      font-size: 12px;
      color: #2a5a2a;
      font-weight: bold;
      min-height: 18px;
    }

    #difficulty-indicator {
      background: #2a5a2a;
      color: #ffd966;
      padding: 2px 8px;
      border-radius: 30px;
      font-size: 11px;
      font-weight: bold;
      border: 2px solid #e9b13b;
      white-space: nowrap;
    }
  </style>
</head>
<body>

<div id="game-container">
  <div id="header">
    <h1>üèöÔ∏è –•–ò–ñ–ò–ù–ê –ß–£–î–ï–°</h1>
    <div style="display: flex; gap: 5px;">
      <div id="stats">
        <div class="stat-box">
          <span>‚ú®</span>
          <span id="score">0</span>
        </div>
        <div class="stat-box">
          <span>‚ù§Ô∏è</span>
          <span id="lives">3</span>
        </div>
      </div>
      <div id="difficulty-indicator">üåü 1x</div>
    </div>
  </div>
  
  <canvas width="300" height="330" id="gameCanvas"></canvas>
  
  <div id="control-panel">
    <button class="btn" id="startBtn" disabled>üöÄ –ó–ê–ì–†–£–ó–ö–ê...</button>
    <button class="btn pause" id="pauseBtn">‚è∏Ô∏è –ü–ê–£–ó–ê</button>
  </div>
  
  <div id="guide">
    <div class="guide-item">
      <img class="guide-img" src="https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-3.png" alt="–î–Ω–µ–≤–Ω–∏–∫" onerror="this.style.display='none'; this.nextSibling.textContent='üìì';">
      <span>+10</span>
    </div>
    <div class="guide-item">
      <img class="guide-img" src="https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-5.png" alt="–ö—Ä–∏—Å—Ç–∞–ª–ª" onerror="this.style.display='none'; this.nextSibling.textContent='üîÆ';">
      <span>+10</span>
    </div>
    <div class="guide-item guide-bad">
      <img class="guide-img" src="https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-6.png" alt="–•–ª–∞–º" onerror="this.style.display='none'; this.nextSibling.textContent='üì¶';">
      <span>-1</span>
    </div>
  </div>
  
  <div id="message">üëâ –ò–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...</div>
</div>

<script>
  (function() {
    // --- –≠–ª–µ–º–µ–Ω—Ç—ã DOM ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreSpan = document.getElementById('score');
    const livesSpan = document.getElementById('lives');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const messageDiv = document.getElementById('message');
    const difficultyIndicator = document.getElementById('difficulty-indicator');

    // --- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã ---
    const CONFIG = {
      CANVAS_WIDTH: 300,
      CANVAS_HEIGHT: 330,
      GOOD_SCORE: 10,
      BAD_SCORE: -1,
      START_LIVES: 3,
      
      // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è
      SPEED_MULTIPLIER_STEP: 0.2,
      SPAWN_RATE_STEP: 5,
      DIFFICULTY_THRESHOLD: 100,
      MAX_SPEED_MULTIPLIER: 2.5,
      MIN_SPAWN_RATE: 40,
      BASE_SPAWN_RATE: 90
    };

    // --- –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ---
    let gameState = {
      active: false,
      paused: false,
      over: false,
      score: 0,
      lives: CONFIG.START_LIVES,
      objects: [],
      spawnTimer: 0,
      
      // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
      difficultyLevel: 1,
      speedMultiplier: 1.0,
      currentSpawnRate: CONFIG.BASE_SPAWN_RATE
    };

    // --- –†–µ—Å—É—Ä—Å—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) ---
    const images = {
      bg: new Image(),
      startImage: new Image(), // –ö–∞—Ä—Ç–∏–Ω–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
      diary: new Image(),
      crystal: new Image(),
      trash: new Image()
    };
    
    images.bg.src = 'https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/mystery_shack.gif';
    images.startImage.src = 'https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-8.png';
    images.diary.src = 'https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-3.png';
    images.crystal.src = 'https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-5.png';
    images.trash.src = 'https://raw.githubusercontent.com/harbon670/my-gravity-falls/main/pixel_art_large-6.png';
    
    Object.values(images).forEach(img => img.crossOrigin = 'Anonymous');

    // --- –¢–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ ---
    const itemTypes = [
      { img: images.diary, type: 'good', baseSpeed: 1.2, size: 33, weight: 40 },
      { img: images.crystal, type: 'good', baseSpeed: 1.5, size: 30, weight: 30 },
      { img: images.trash, type: 'bad', baseSpeed: 1.0, size: 35, weight: 30 }
    ];

    // --- –û–±–∏–¥–Ω—ã–µ —Ñ—Ä–∞–∑—ã –ë–∏–ª–ª–∞ ---
    const billPhrases = [
      '–•–ê-–•–ê! –°–õ–ê–ë–ê–ö!',
      '–î–û–ì–û–í–û–† –ù–ï –î–ï–ô–°–¢–í–ò–¢–ï–õ–ï–ù!',
      '–¢—ã –Ω–µ –≤ —Å–≤–æ–µ–π –ª–∏–≥–µ, –¥–µ—Ç–∫–∞!',
      '–†–∞—Å—Å–ª–∞–±—å—Å—è, –∫–æ—Ä–æ—Ç—ã—à–∫–∞. –Ø –∑–¥–µ—Å—å!',
      '–†–ï–ê–õ–¨–ù–û–°–¢–¨ –°–õ–û–ú–ê–ù–ê!',
      '–§–û–†–ú–ê –ò –ü–£–°–¢–û–¢–ê!',
      '–•–ò–ñ–ò–ù–ê –ò–°–ß–ï–ó–õ–ê!',
      '–¢–´ –ù–ï –°–ü–ê–°–ï–®–¨ –ú–ò–†!'
    ];
    let currentBillPhrase = billPhrases[0];

    // --- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ---
    let loadedImagesCount = 0;
    const totalImagesToLoad = Object.keys(images).length;

    function handleImageLoad() {
      loadedImagesCount++;
      if (loadedImagesCount === totalImagesToLoad) {
        startBtn.disabled = false;
        startBtn.textContent = 'üöÄ –°–¢–ê–†–¢';
        messageDiv.innerText = 'üëâ –ù–∞–∂–º–∏ –°–¢–ê–†–¢, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!';
      }
    }

    for (let key in images) {
      images[key].addEventListener('load', handleImageLoad);
      images[key].addEventListener('error', () => {
        console.warn(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ${key}`);
        handleImageLoad();
      });
    }

    // --- –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ ---
    function getRandomItemType() {
      const totalWeight = itemTypes.reduce((sum, type) => sum + type.weight, 0);
      let random = Math.random() * totalWeight;
      
      for (const type of itemTypes) {
        if (random < type.weight) {
          return type;
        }
        random -= type.weight;
      }
      return itemTypes[0];
    }

    // --- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ---
    function updateDifficulty() {
      const newLevel = Math.floor(gameState.score / CONFIG.DIFFICULTY_THRESHOLD) + 1;
      
      if (newLevel !== gameState.difficultyLevel) {
        gameState.difficultyLevel = newLevel;
        
        gameState.speedMultiplier = Math.min(
          1.0 + (gameState.difficultyLevel - 1) * CONFIG.SPEED_MULTIPLIER_STEP,
          CONFIG.MAX_SPEED_MULTIPLIER
        );
        
        gameState.currentSpawnRate = Math.max(
          CONFIG.BASE_SPAWN_RATE - (gameState.difficultyLevel - 1) * CONFIG.SPAWN_RATE_STEP,
          CONFIG.MIN_SPAWN_RATE
        );
        
        if (gameState.active && !gameState.over) {
          messageDiv.innerText = `‚ö° –£–†–û–í–ï–ù–¨ ${gameState.difficultyLevel}! ‚ö°`;
          setTimeout(() => {
            if (gameState.active && !gameState.paused && !gameState.over) {
              messageDiv.innerText = 'üéÆ –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è!';
            }
          }, 1500);
        }
        
        updateDifficultyIndicator();
      }
    }
    
    function updateDifficultyIndicator() {
      let stars = '';
      for (let i = 0; i < Math.min(gameState.difficultyLevel, 5); i++) {
        stars += 'üåü';
      }
      if (gameState.difficultyLevel > 5) {
        stars = 'üåü' + gameState.difficultyLevel + 'x';
      } else {
        stars = stars || 'üåü1x';
      }
      difficultyIndicator.textContent = stars;
    }

    // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ---
    function updateUI() {
      scoreSpan.innerText = gameState.score;
      livesSpan.innerText = gameState.lives;
    }

    function resetGame() {
      gameState.active = true;
      gameState.paused = false;
      gameState.over = false;
      gameState.score = 0;
      gameState.lives = CONFIG.START_LIVES;
      gameState.objects = [];
      gameState.spawnTimer = 0;
      
      gameState.difficultyLevel = 1;
      gameState.speedMultiplier = 1.0;
      gameState.currentSpawnRate = CONFIG.BASE_SPAWN_RATE;
      
      updateUI();
      updateDifficultyIndicator();
      messageDiv.innerText = 'üéÆ –°–æ–±–∏—Ä–∞–π –¥–Ω–µ–≤–Ω–∏–∫–∏!';
      pauseBtn.innerText = '‚è∏Ô∏è –ü–ê–£–ó–ê';
    }

    function gameOver() {
      currentBillPhrase = billPhrases[Math.floor(Math.random() * billPhrases.length)];
      gameState.over = true;
      gameState.active = false;
      gameState.objects = [];
      messageDiv.innerText = 'üëÅÔ∏è –ë–∏–ª–ª –ø–æ–±–µ–¥–∏–ª! üëÅÔ∏è';
    }

    // --- –§—É–Ω–∫—Ü–∏—è —Å–ø–∞–≤–Ω–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ ---
    function spawnItem() {
      if (!gameState.active || gameState.paused || gameState.over) return;
      
      const type = getRandomItemType();
      
      gameState.objects.push({
        img: type.img,
        type: type.type,
        size: type.size,
        x: 30 + Math.random() * (CONFIG.CANVAS_WIDTH - 60),
        y: CONFIG.CANVAS_HEIGHT - 10, // –ü–æ—è–≤–ª—è–µ—Ç—Å—è —á—É—Ç—å –≤—ã—à–µ –Ω–∏–∂–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã
        speed: type.baseSpeed * gameState.speedMultiplier
      });
    }

    // --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ ---
    canvas.addEventListener('pointerdown', (e) => {
      e.preventDefault();
      if (!gameState.active || gameState.paused || gameState.over) return;
      
      const rect = canvas.getBoundingClientRect();
      const scaleX = CONFIG.CANVAS_WIDTH / rect.width;
      const scaleY = CONFIG.CANVAS_HEIGHT / rect.height;
      
      const mouseX = (e.clientX - rect.left) * scaleX;
      const mouseY = (e.clientY - rect.top) * scaleY;
      
      for (let i = gameState.objects.length - 1; i >= 0; i--) {
        const obj = gameState.objects[i];
        
        const halfSize = obj.size / 2;
        if (mouseX > obj.x - halfSize && mouseX < obj.x + halfSize &&
            mouseY > obj.y - halfSize && mouseY < obj.y + halfSize) {
          
          if (obj.type === 'good') {
            gameState.score += CONFIG.GOOD_SCORE;
            updateDifficulty();
          } else {
            gameState.lives += CONFIG.BAD_SCORE;
            if (gameState.lives <= 0) {
              gameState.lives = 0;
              gameOver();
            }
          }
          
          gameState.objects.splice(i, 1);
          updateUI();
          return;
        }
      }
    });

    // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ ---
    startBtn.addEventListener('click', () => {
      resetGame();
    });

    pauseBtn.addEventListener('click', () => {
      if (!gameState.active || gameState.over) return;
      
      gameState.paused = !gameState.paused;
      if (gameState.paused) {
        pauseBtn.innerText = '‚ñ∂Ô∏è –ü–†–û–î–û–õ–ñ–ò–¢–¨';
        messageDiv.innerText = '‚è∏Ô∏è –ü–∞—É–∑–∞. –ù–∞–∂–º–∏ –ü–†–û–î–û–õ–ñ–ò–¢–¨';
      } else {
        pauseBtn.innerText = '‚è∏Ô∏è –ü–ê–£–ó–ê';
        messageDiv.innerText = 'üéÆ –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è!';
      }
    });

    // --- –§—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ ---
    function drawBackground() {
      if (images.bg.complete) {
        ctx.drawImage(images.bg, 0, 0, CONFIG.CANVAS_WIDTH, CONFIG.CANVAS_HEIGHT);
      } else {
        ctx.fillStyle = '#3a7a3a';
        ctx.fillRect(0, 0, CONFIG.CANVAS_WIDTH, CONFIG.CANVAS_HEIGHT);
      }
    }

    function drawObjects() {
      gameState.objects.forEach(obj => {
        if (obj.img && obj.img.complete) {
          ctx.drawImage(obj.img, obj.x - obj.size/2, obj.y - obj.size/2, obj.size, obj.size);
        } else {
          // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
          ctx.fillStyle = obj.type === 'good' ? '#ffd966' : '#ff6666';
          ctx.beginPath();
          ctx.arc(obj.x, obj.y, obj.size/2, 0, Math.PI * 2);
          ctx.fill();
        }
      });
    }

    function drawStartScreen() {
      // –†–∏—Å—É–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
      if (images.startImage.complete) {
        ctx.drawImage(images.startImage, 0, 0, CONFIG.CANVAS_WIDTH, CONFIG.CANVAS_HEIGHT);
      } else {
        // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
        ctx.fillStyle = 'rgba(0,0,0,0.4)';
        ctx.fillRect(0, 0, CONFIG.CANVAS_WIDTH, CONFIG.CANVAS_HEIGHT);
        ctx.fillStyle = '#ffd966';
        ctx.font = 'bold 16px "Comic Sans MS", cursive';
        ctx.fillText('üöÄ –ù–ê–ñ–ú–ò –°–¢–ê–†–¢', 60, 170);
      }
    }

    function drawOverlay() {
      if (!gameState.active && !gameState.over) {
        drawStartScreen();
      }
      
      if (gameState.paused) {
        ctx.fillStyle = 'rgba(0,0,0,0.3)';
        ctx.fillRect(0, 0, CONFIG.CANVAS_WIDTH, CONFIG.CANVAS_HEIGHT);
        ctx.fillStyle = '#ffffff';
        ctx.font = 'bold 28px "Comic Sans MS", cursive';
        ctx.fillText('‚è∏Ô∏è', 130, 180);
      }
      
      if (gameState.over) {
        drawBill();
      }
    }

    function drawBill() {
      ctx.fillStyle = 'rgba(0,0,0,0.8)';
      ctx.fillRect(0, 0, CONFIG.CANVAS_WIDTH, CONFIG.CANVAS_HEIGHT);
      
      ctx.shadowColor = '#ffff00';
      ctx.shadowBlur = 30;
      
      ctx.fillStyle = '#ffff66';
      ctx.beginPath();
      ctx.moveTo(150, 70);
      ctx.lineTo(80, 200);
      ctx.lineTo(220, 200);
      ctx.closePath();
      ctx.fill();
      
      ctx.fillStyle = '#ffffff';
      ctx.beginPath();
      ctx.arc(150, 140, 25, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.fillStyle = '#000000';
      ctx.beginPath();
      ctx.ellipse(150, 140, 8, 20, 0, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.fillStyle = '#ffffff';
      ctx.beginPath();
      ctx.arc(140, 130, 5, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.fillStyle = '#000000';
      ctx.fillRect(130, 40, 40, 35);
      ctx.fillRect(115, 30, 70, 15);
      
      ctx.shadowBlur = 20;
      ctx.fillStyle = '#ffff66';
      ctx.font = 'bold 14px "Comic Sans MS", cursive';
      ctx.textAlign = 'center';
      ctx.fillText(currentBillPhrase, 150, 260);
      
      ctx.font = 'bold 12px "Comic Sans MS", cursive';
      ctx.fillStyle = '#ffffff';
      ctx.fillText('–Ω–∞–∂–º–∏ –°–¢–ê–†–¢', 150, 300);
      
      ctx.shadowBlur = 0;
      ctx.textAlign = 'left';
    }

    // --- –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª ---
    function gameLoop() {
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏
      if (gameState.active && !gameState.paused && !gameState.over) {
        // –°–ø–∞–≤–Ω –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        gameState.spawnTimer++;
        if (gameState.spawnTimer >= gameState.currentSpawnRate) {
          spawnItem();
          gameState.spawnTimer = 0;
        }
        
        // –î–≤–∏–∂–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        for (let i = gameState.objects.length - 1; i >= 0; i--) {
          const obj = gameState.objects[i];
          
          // –î–≤–∏–≥–∞–µ–º –ø—Ä–µ–¥–º–µ—Ç –≤–≤–µ—Ä—Ö
          obj.y -= obj.speed;
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É–ª–µ—Ç–µ–ª –ª–∏ –ø—Ä–µ–¥–º–µ—Ç –∑–∞ –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É
          if (obj.y + obj.size/2 < 0) {
            if (obj.type === 'good') {
              gameState.lives--;
              if (gameState.lives <= 0) {
                gameState.lives = 0;
                gameOver();
              }
            }
            gameState.objects.splice(i, 1);
          }
        }
        
        updateUI();
      }

      // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
      drawBackground();
      drawObjects();
      drawOverlay();

      requestAnimationFrame(gameLoop);
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
    gameLoop();
  })();
</script>
</body>
</html>
